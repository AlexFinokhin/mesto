(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector)}var n,r;return n=t,(r=[{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(){return!this._inputList.every((function(t){return t.validity.valid}))}},{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector("#".concat(t.id,"-error"));n.classList.add(this._config.errorClass),n.textContent=e,t.classList.add(this._config.inputErrorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector("#".concat(t.id,"-error"));t.classList.remove(this._config.inputErrorClass),e.classList.remove(this._config.errorClass),e.textContent=""}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.disableSubmitButton():(this._buttonElement.removeAttribute("disabled"),this._buttonElement.classList.remove(this._config.inactiveButtonClass))}},{key:"disableSubmitButton",value:function(){this._buttonElement.disabled=!0,this._buttonElement.classList.add("popup__save-button_disabled")}},{key:"resetValidation",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){t._hideInputError(e)}))}},{key:"_setEventListeners",value:function(){var t=this;this._formElement.addEventListener("submit",(function(t){t.preventDefault()})),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))})),this._toggleButtonState()}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),r=document.querySelector(".popup_viewer"),o=document.querySelector(".popup_form_edit"),i=document.querySelector(".elements__list"),u=document.querySelector(".popup_type_add-card"),a=document.querySelector(".profile__add-button"),l=document.querySelector(".profile__edit-button"),c={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:"popup__input-error",errorClass:"popup__input-error_active"};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===s(o)?o:String(o)),r)}var o}var f=function(){function t(e,n){var r=e.name,o=e.link,i=e.handleCardClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=r,this._link=o,this._templateSelector=n,this._handleCardClick=i}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var t=this;this._elementLikeButton.addEventListener("click",(function(){t._handleLikeClick()})),this._elementTrashButton.addEventListener("click",(function(){t._handleDeleteClick()})),this._elementImage.addEventListener("click",(function(){t._handleCardClick(t._name,t._link)}))}},{key:"_handleLikeClick",value:function(){this._elementLikeButton.classList.toggle("element__like-button_active")}},{key:"_handleDeleteClick",value:function(){this._element.remove(),this._element=null}},{key:"generateCard",value:function(){var t=this._getTemplate();return this._elementLikeButton=t.querySelector(".element__like-button"),this._elementTrashButton=t.querySelector(".element__trash-button"),this._elementImage=t.querySelector(".element__image"),this._elementName=t.querySelector(".element__name"),this._setEventListeners(),this._elementImage.src=this._link,this._elementImage.alt=this._name,this._elementName.textContent=this._name,this._element=t,this._element}}])&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==y(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===y(o)?o:String(o)),r)}var o}var v=function(){function t(e){var n=e.profileNameSelector,r=e.profileJobSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._profileName=document.querySelector(n),this._profileJob=document.querySelector(r),this._avatar=document.querySelector(".profile__avatar")}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.job;this._profileName.textContent=e,this._profileJob.textContent=n}},{key:"setAvatar",value:function(t){var e=t.avatar;e&&(this._avatar.src=e)}}])&&m(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===b(o)?o:String(o)),r)}var o}var _=function(){function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=r,this._renderer=o,this._container=n}var e,n;return e=t,(n=[{key:"erase",value:function(){this._container.innerHTML=""}},{key:"addDefaultItem",value:function(t){this._container.append(t)}},{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"renderItems",value:function(){var t=this;this.erase(),this._renderedItems.forEach((function(e){t._renderer(e)}))}}])&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===h(o)?o:String(o)),r)}var o}var g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=e,this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"openPopup",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"closePopup",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.closePopup()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("click",(function(e){e.target.classList.contains("popup__close-button")&&t.closePopup(),e.target.classList.contains("popup_opened")&&t.closePopup()}))}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},E.apply(this,arguments)}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}var O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=j(r);if(o){var n=j(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._image=e._popup.querySelector(".popup__image"),e._title=e._popup.querySelector(".popup__text"),e}return e=u,(n=[{key:"openPopup",value:function(t,e){this._image.src=e,this._image.alt=t,this._title.textContent=t,E(j(u.prototype),"openPopup",this).call(this)}}])&&k(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(g);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==L(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===L(o)?o:String(o)),r)}var o}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=B(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},I.apply(this,arguments)}function q(t,e){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},q(t,e)}function B(t){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},B(t)}var T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=B(r);if(o){var n=B(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._submitHandler=e,n._popupForm=n._popup.querySelector(".popup__form"),n._submitButton=n._popupForm.querySelector(".popup__save-button"),n._inputsList=n._popupForm.querySelectorAll(".popup__input"),n._submitButtonInitialText=n._submitButton.textContent,n}return e=u,(n=[{key:"_getInputValues",value:function(){var t={};return this._inputsList.forEach((function(e){t[e.name]=e.value})),t}},{key:"loading",value:function(t){this._submitButton.textContent=t?"Сохранение...":this._submitButtonInitialText}},{key:"setInputsValues",value:function(t){this._inputsList.forEach((function(e){e.value=t[e.name]}))}},{key:"setEventListeners",value:function(){var t=this;I(B(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){e.preventDefault(),t._submitHandler(t._getInputValues()),t.closePopup()}))}},{key:"closePopup",value:function(){I(B(u.prototype),"closePopup",this).call(this),this._popupForm.reset()}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(g),x=new _({items:[{name:"Барби",link:"https://cdn.shazoo.ru/622011_XutF2N1_hjo6aqa.jpg"},{name:"Драйв",link:"https://mcmag.ru/wp-content/uploads/2018/06/hallway.jpg"},{name:"Место под соснами",link:"https://mobimg.b-cdn.net/v3/fetch/55/552b5d5c4a3c46156dfba047df72fdfb.jpeg"},{name:"Бегущий по лезвию",link:"https://cinemax.ru/wp-content/uploads/2020/11/Screenshot_11.png"},{name:"Ларс и настоящая девушка ",link:"https://streamondemandathome.com/wp-content/uploads/2016/04/larsrealgirl.jpg"},{name:"Ла-Ла Лэнд",link:"https://mobimg.b-cdn.net/v3/fetch/4d/4da8657ada4763a8cc6b86547a98ba76.jpeg"}],renderer:function(t){var e=R(t);x.addDefaultItem(e)}},i);function R(t){var e=t.name,n=t.link;return new f({name:e,link:n,handleCardClick:D},".template-card").generateCard()}x.renderItems();var V=new O(r);function D(t,e){V.openPopup(t,e)}V.setEventListeners();var N=new v({profileNameSelector:".profile__name",profileJobSelector:".profile__job"}),F=new T(u,(function(t){var e=R(t);F.loading(),x.addItem(e),F.closePopup()}));F.setEventListeners();var A=new T(o,(function(t){A.loading(),N.setUserInfo(t)}));A.setEventListeners();var J=new T(document.querySelector(".popup_form_avatar"),(function(t){J.closePopup()}));J.setEventListeners();var U=document.querySelector(".profile__avatar-edit");a.addEventListener("click",(function(){F.openPopup(),z.disableSubmitButton(),z.resetValidation()}),!1),l.addEventListener("click",(function(){A.openPopup(),A.setInputsValues(N.getUserInfo()),M.resetValidation()}),!1),U.addEventListener("click",(function(){J.openPopup(),X.enableValidation(),X.disableSubmitButton()}),!1);var H=document.querySelector(".popup_form_avatar"),M=new n(c,o);M.enableValidation();var z=new n(c,u);z.enableValidation();var X=new n(c,H);X.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFFWixJQUFNUyxFQUFxQjFHLFNBQVNwQyxjQUNsQyx5QkFRSndDLEVBQWNWLGlCQUNaLFNBQVMsV0FDUHlHLEVBQVFILFlBQ1JXLEVBQXNCekgsc0JBQ3RCeUgsRUFBc0JDLGlCQUN4QixJQUNBLEdBR0Z2RyxFQUFXWCxpQkFDVCxTQUFTLFdBQ1A2RyxFQUFTUCxZQUNUTyxFQUFTTSxnQkFBZ0JYLEVBQVNZLGVBQ2xDQyxFQUEwQkgsaUJBQzVCLElBQ0EsR0FLRkYsRUFBbUJoSCxpQkFDakIsU0FDQSxXQUNFK0csRUFBWVQsWUFDWmdCLEVBQXlCQyxtQkFDekJELEVBQXlCOUgscUJBRTNCLElBQ0EsR0FTRixJQUFNZ0ksRUFBaUJsSCxTQUFTcEMsY0FBYyxzQkFJeENtSixFQUE0QixJQUFJaEssRUFBY3VELEVBQWFMLEdBQ2pFOEcsRUFBMEJFLG1CQUUxQixJQUFNTixFQUF3QixJQUFJNUosRUFBY3VELEVBQWFILEdBQzdEd0csRUFBc0JNLG1CQUd0QixJQUFNRCxFQUEyQixJQUFJakssRUFBY3VELEVBQWE0RyxHQUNoRUYsRUFBeUJDLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC8uL3NyYy9Db21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC8uL3NyYy91dGlscy/QoW9uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QvLi9zcmMvQ29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QvLi9zcmMvQ29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0Ly4vc3JjL0NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0Ly4vc3JjL0NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC8uL3NyYy9Db21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QvLi9zcmMvQ29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0TGlzdC5ldmVyeShcclxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9fc2F2ZS1idXR0b25fZGlzYWJsZWRcIik7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgaW1nUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3ZpZXdlclwiKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX2Zvcm1fZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2xpc3RcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfYWRkLWNhcmRcIik7XHJcblxyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWdWYWxpZCA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zYXZlLWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3NhdmUtYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dC1lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG4gIH07XHJcblxyXG4gIGV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6ICfQkdCw0YDQsdC4JyxcclxuICAgICAgbGluazogJ2h0dHBzOi8vY2RuLnNoYXpvby5ydS82MjIwMTFfWHV0RjJOMV9oam82YXFhLmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6ICfQlNGA0LDQudCyJyxcclxuICAgICAgbGluazogJ2h0dHBzOi8vbWNtYWcucnUvd3AtY29udGVudC91cGxvYWRzLzIwMTgvMDYvaGFsbHdheS5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiAn0JzQtdGB0YLQviDQv9C+0LQg0YHQvtGB0L3QsNC80LgnLFxyXG4gICAgICBsaW5rOiAnaHR0cHM6Ly9tb2JpbWcuYi1jZG4ubmV0L3YzL2ZldGNoLzU1LzU1MmI1ZDVjNGEzYzQ2MTU2ZGZiYTA0N2RmNzJmZGZiLmpwZWcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiAn0JHQtdCz0YPRidC40Lkg0L/QviDQu9C10LfQstC40Y4nLFxyXG4gICAgICBsaW5rOiAnaHR0cHM6Ly9jaW5lbWF4LnJ1L3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDIwLzExL1NjcmVlbnNob3RfMTEucG5nJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogJ9Cb0LDRgNGBINC4INC90LDRgdGC0L7Rj9GJ0LDRjyDQtNC10LLRg9GI0LrQsCAnLFxyXG4gICAgICBsaW5rOiAnaHR0cHM6Ly9zdHJlYW1vbmRlbWFuZGF0aG9tZS5jb20vd3AtY29udGVudC91cGxvYWRzLzIwMTYvMDQvbGFyc3JlYWxnaXJsLmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6ICfQm9CwLdCb0LAg0JvRjdC90LQnLFxyXG4gICAgICBsaW5rOiAnaHR0cHM6Ly9tb2JpbWcuYi1jZG4ubmV0L3YzL2ZldGNoLzRkLzRkYTg2NTdhZGE0NzYzYThjYzZiODY1NDdhOThiYTc2LmpwZWcnXHJcbiAgICB9XHJcbiAgXTsiLCJleHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rLCBoYW5kbGVDYXJkQ2xpY2sgfSwgdGVtcGxhdGVTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50VHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2soKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlQ2xpY2soKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50TGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUNsaWNrKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgY29uc3QgZWxlbWVudFRlbXBsYXRlID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50TGlrZUJ1dHRvbiA9IGVsZW1lbnRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5lbGVtZW50X19saWtlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fZWxlbWVudFRyYXNoQnV0dG9uID0gZWxlbWVudFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmVsZW1lbnRfX3RyYXNoLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fZWxlbWVudEltYWdlID0gZWxlbWVudFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9lbGVtZW50TmFtZSA9IGVsZW1lbnRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX25hbWVcIik7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50SW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fZWxlbWVudE5hbWUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50VGVtcGxhdGU7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBwcm9maWxlTmFtZVNlbGVjdG9yLCBwcm9maWxlSm9iU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50ID0gam9iO1xyXG4gIH1cclxuXHJcbiAgc2V0QXZhdGFyKHthdmF0YXJ9KSB7XHJcbiAgICBpZihhdmF0YXIpIHtcclxuICAgICAgdGhpcy5fYXZhdGFyLnNyYyA9IGF2YXRhcjtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XHJcbiAgfVxyXG5cclxuICBlcmFzZSgpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgYWRkRGVmYXVsdEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5lcmFzZSgpO1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBwb3B1cFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3BlblBvcHVwKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlUG9wdXAoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZS1idXR0b25cIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfb3BlbmVkXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fdGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX190ZXh0XCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlblBvcHVwKG5hbWUsIGxpbmspIHtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fdGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlblBvcHVwKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEhhbmRsZXIpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZS1idXR0b24nKVxyXG4gICAgdGhpcy5faW5wdXRzTGlzdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkluaXRpYWxUZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXREYXRhID0ge307XHJcbiAgICB0aGlzLl9pbnB1dHNMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0RGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXREYXRhO1xyXG4gIH1cclxuXHJcblxyXG4gIGxvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJ1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25Jbml0aWFsVGV4dDtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG4gIHNldElucHV0c1ZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dHNMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5fc3VibWl0SGFuZGxlcih0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgY2xvc2VQb3B1cCgpIHtcclxuICAgIHN1cGVyLmNsb3NlUG9wdXAoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9Db21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgY29uZmlnVmFsaWQsIGluaXRpYWxDYXJkcyB9IGZyb20gXCIuLi91dGlscy/QoW9uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vQ29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL0NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9Db21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi4vQ29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4uL0NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG4vL2ltcG9ydCB7IFBvcHVwV2l0aFN1Ym1pdCB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGltZ1BvcHVwLFxyXG4gIHBvcHVwRWRpdFByb2ZpbGUsXHJcbiAgZWxlbWVudHNMaXN0LFxyXG4gIHBvcHVwQWRkQ2FyZCxcclxuICBhZGRDYXJkQnV0dG9uLFxyXG4gIGVkaXRCdXR0b24sXHJcbn0gZnJvbSBcIi4uL3V0aWxzL9Chb25zdGFudHMuanNcIjtcclxuXHJcbi8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19TZWN0aW9uX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBhZGRUZW1wbGF0ZUNhcmQoaXRlbSk7XHJcbiAgICAgIGNhcmRMaXN0LmFkZERlZmF1bHRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBlbGVtZW50c0xpc3RcclxuKTtcclxuY2FyZExpc3QucmVuZGVySXRlbXMoKTtcclxuXHJcbi8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19DYXJkX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5mdW5jdGlvbiBhZGRUZW1wbGF0ZUNhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICB7IG5hbWUsIGxpbmssIGhhbmRsZUNhcmRDbGljazogb3BlbkJpZ0ltYWdlIH0sXHJcbiAgICBcIi50ZW1wbGF0ZS1jYXJkXCJcclxuICApO1xyXG5cclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcblxyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5cclxuLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX1BvcHVwV2l0aEltYWdlX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5jb25zdCBvcGVuUG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShpbWdQb3B1cCk7XHJcbm9wZW5Qb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5mdW5jdGlvbiBvcGVuQmlnSW1hZ2UobmFtZSwgbGluaykge1xyXG4gIG9wZW5Qb3B1cEltYWdlLm9wZW5Qb3B1cChuYW1lLCBsaW5rKTtcclxufVxyXG5cclxuLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX1VzZXJJbmZvX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgcHJvZmlsZU5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIHByb2ZpbGVKb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fam9iXCIsXHJcbiAgXHJcbn0pO1xyXG5cclxuLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX1BvcHVwV2l0aEZvcm1fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcbmNvbnN0IGFkZENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEFkZENhcmQsIGhhbmRsZUNhcmRGb3JtU3VibWl0KTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRGb3JtU3VibWl0KGRhdGEpIHtcclxuICBjb25zdCBjYXJkID0gYWRkVGVtcGxhdGVDYXJkKGRhdGEpO1xyXG4gIGFkZENhcmQubG9hZGluZygpOyAvL1BSIDlcclxuICBjYXJkTGlzdC5hZGRJdGVtKGNhcmQpO1xyXG4gIGFkZENhcmQuY2xvc2VQb3B1cCgpO1xyXG59XHJcbmFkZENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19Qb3B1cFdpdGhGb3JtX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5jb25zdCBlZGl0SW5mbyA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwRWRpdFByb2ZpbGUsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZGF0YSkge1xyXG4gIGVkaXRJbmZvLmxvYWRpbmcoKTsvL1BSIDlcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTtcclxufVxyXG5cclxuZWRpdEluZm8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcblxyXG5jb25zdCBwb3B1cFVwZGF0ZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucG9wdXBfZm9ybV9hdmF0YXJcIlxyXG4pOyAvL1BSIDlcclxuXHJcblxyXG5cclxuY29uc3QgcG9wdXBBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBwb3B1cFVwZGF0ZUF2YXRhcixcclxuICBoYW5kbGVTdWJtaXRGb3JtVXBkYXRlQXZhdGFyKTsgLy9QUiA5XHJcblxyXG5cclxuZnVuY3Rpb24gaGFuZGxlU3VibWl0Rm9ybVVwZGF0ZUF2YXRhcihkYXRhKSB7XHJcblxyXG4gIHBvcHVwQXZhdGFyLmNsb3NlUG9wdXAoKTtcclxuXHJcbiAgfVxyXG4gIHBvcHVwQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gIGNvbnN0IGJ1dHRvblVwZGF0ZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICBcIi5wcm9maWxlX19hdmF0YXItZWRpdFwiXHJcbiAgKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gIFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgYWRkQ2FyZC5vcGVuUG9wdXAoKTtcclxuICAgIGZvcm1BZGRDYXJkVmFsaWRhdGlvbi5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICBmb3JtQWRkQ2FyZFZhbGlkYXRpb24ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgfSxcclxuICBmYWxzZVxyXG4pO1xyXG5cclxuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gIFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgZWRpdEluZm8ub3BlblBvcHVwKCk7XHJcbiAgICBlZGl0SW5mby5zZXRJbnB1dHNWYWx1ZXModXNlckluZm8uZ2V0VXNlckluZm8oKSk7XHJcbiAgICBmb3JtUHJvZmlsZUVkaXRWYWxpZGF0aW9uLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIH0sXHJcbiAgZmFsc2VcclxuKTtcclxuXHJcblxyXG4vLyBQUiA5IEFWQVRBUlxyXG5idXR0b25VcGRhdGVBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcclxuICBcImNsaWNrXCIsXHJcbiAgKCkgPT4ge1xyXG4gICAgcG9wdXBBdmF0YXIub3BlblBvcHVwKCk7XHJcbiAgICBmb3JtQXZhdGFyRWRpdFZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gICAgZm9ybUF2YXRhckVkaXRWYWxpZGF0aW9uLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuXHJcbiAgfSxcclxuICBmYWxzZVxyXG4pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuY29uc3QgZm9ybUF2YXRhckVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX2Zvcm1fYXZhdGFyXCIpO1xyXG5cclxuXHJcbi8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19Gb3JtVmFsaWRhdG9yX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5jb25zdCBmb3JtUHJvZmlsZUVkaXRWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnVmFsaWQsIHBvcHVwRWRpdFByb2ZpbGUpO1xyXG5mb3JtUHJvZmlsZUVkaXRWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGZvcm1BZGRDYXJkVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZ1ZhbGlkLCBwb3B1cEFkZENhcmQpO1xyXG5mb3JtQWRkQ2FyZFZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy9QUiA5IEFWQVRBUlxyXG5jb25zdCBmb3JtQXZhdGFyRWRpdFZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWdWYWxpZCwgZm9ybUF2YXRhckVkaXQpO1xyXG5mb3JtQXZhdGFyRWRpdFZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9jb25maWciLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJfYnV0dG9uRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImtleSIsInZhbHVlIiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXZlcnkiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJjb25jYXQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsImVycm9yQ2xhc3MiLCJ0ZXh0Q29udGVudCIsImlucHV0RXJyb3JDbGFzcyIsInJlbW92ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlU3VibWl0QnV0dG9uIiwicmVtb3ZlQXR0cmlidXRlIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiX3RoaXMiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX3RoaXMyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJpbWdQb3B1cCIsImRvY3VtZW50IiwicG9wdXBFZGl0UHJvZmlsZSIsImVsZW1lbnRzTGlzdCIsInBvcHVwQWRkQ2FyZCIsImFkZENhcmRCdXR0b24iLCJlZGl0QnV0dG9uIiwiY29uZmlnVmFsaWQiLCJmb3JtU2VsZWN0b3IiLCJDYXJkIiwiX3JlZiIsInRlbXBsYXRlU2VsZWN0b3IiLCJuYW1lIiwibGluayIsImhhbmRsZUNhcmRDbGljayIsIl9uYW1lIiwiX2xpbmsiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnRMaWtlQnV0dG9uIiwiX2hhbmRsZUxpa2VDbGljayIsIl9lbGVtZW50VHJhc2hCdXR0b24iLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfZWxlbWVudEltYWdlIiwidG9nZ2xlIiwiX2VsZW1lbnQiLCJlbGVtZW50VGVtcGxhdGUiLCJfZ2V0VGVtcGxhdGUiLCJfZWxlbWVudE5hbWUiLCJzcmMiLCJhbHQiLCJVc2VySW5mbyIsInByb2ZpbGVOYW1lU2VsZWN0b3IiLCJwcm9maWxlSm9iU2VsZWN0b3IiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZUpvYiIsIl9hdmF0YXIiLCJqb2IiLCJfcmVmMiIsIl9yZWYzIiwiYXZhdGFyIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImlubmVySFRNTCIsImVsZW1lbnQiLCJhcHBlbmQiLCJwcmVwZW5kIiwiZXJhc2UiLCJpdGVtIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJjbG9zZVBvcHVwIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImNhbGwiLCJfaW1hZ2UiLCJfdGl0bGUiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdEhhbmRsZXIiLCJfc3VibWl0SGFuZGxlciIsIl9wb3B1cEZvcm0iLCJfc3VibWl0QnV0dG9uIiwiX2lucHV0c0xpc3QiLCJfc3VibWl0QnV0dG9uSW5pdGlhbFRleHQiLCJpbnB1dERhdGEiLCJpbnB1dCIsImlzTG9hZGluZyIsImRhdGEiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsImNhcmRMaXN0IiwiY2FyZEVsZW1lbnQiLCJhZGRUZW1wbGF0ZUNhcmQiLCJhZGREZWZhdWx0SXRlbSIsIm9wZW5CaWdJbWFnZSIsImdlbmVyYXRlQ2FyZCIsInJlbmRlckl0ZW1zIiwib3BlblBvcHVwSW1hZ2UiLCJvcGVuUG9wdXAiLCJzZXRFdmVudExpc3RlbmVycyIsInVzZXJJbmZvIiwiYWRkQ2FyZCIsImNhcmQiLCJsb2FkaW5nIiwiYWRkSXRlbSIsImVkaXRJbmZvIiwic2V0VXNlckluZm8iLCJwb3B1cEF2YXRhciIsImJ1dHRvblVwZGF0ZUF2YXRhciIsImZvcm1BZGRDYXJkVmFsaWRhdGlvbiIsInJlc2V0VmFsaWRhdGlvbiIsInNldElucHV0c1ZhbHVlcyIsImdldFVzZXJJbmZvIiwiZm9ybVByb2ZpbGVFZGl0VmFsaWRhdGlvbiIsImZvcm1BdmF0YXJFZGl0VmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJmb3JtQXZhdGFyRWRpdCJdLCJzb3VyY2VSb290IjoiIn0=